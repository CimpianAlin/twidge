  <refentry id="twodge.man">
  <indexterm><primary>twidge</><secondary>Reference For</></>
  <refentryinfo>
    <address><email>jgoerzen@complete.org</email></address>
    <author><firstname>John</firstname><surname>Goerzen</surname></author>
  </refentryinfo>

  <refmeta>
    <refentrytitle>twidge</refentrytitle>
    <manvolnum>1</manvolnum>
    <refmiscinfo>John Goerzen</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>twidge</refname>
    <refpurpose>Microblogging client for Twitter, Identica</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>twidge</command>
      <arg choice="opt">-d</arg>
      <arg choice="opt">-c <replaceable>FILE</replaceable></arg>
      <arg choice="plain"><replaceable>command</replaceable></arg>
      <arg choice="opt"><replaceable>command_args</replaceable></arg>
    </cmdsynopsis>
    <cmdsynopsis>
      <command>twidge</command>
      <arg choice="plain">--help</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsect1 id="twidge.description">
    <title>Description</title>
    <para>
      &twidge; is a client for microblogging sites such as 
      <ulink url="http://twitter.com/">Twitter</ulink> and
      <ulink url="http://identi.ca/">Identica</ulink> (identi.ca).
      Microblogging sites let you post short one-paragraph updates,
      follow the updates that your friends post, and interact with
      everyone in the site in a conversation style.
    </para>
    <para>
      &twidge; is a client to make working with microblogging sites
      faster and easier.  It is extremely versatile, and can be
      customized to work the way you want to work, and combined with
      other tools to do just about anything.
    </para>
    <para>
      &twidge; can be used quite nicely interactively from the shell.
      It is useful directly as-is, and with simple shell aliases can
      make a highly efficient system to do exactly what you want.  It
      is perfectly capable of being your only client for
      microblogging.
    </para>
    <para>
      &twidge; also can be used in an automated way, via
      <command>cron(1)</command>, or it can even integrate with your
      email system.
    </para>
    <para>
      A full list of &twidge; features, along with numerous
      suggestions on how to use it, can be found at the &twidge;
      website at <ulink
      url="http://software.complete.org/twidge"></ulink>.
    </para>
    
    <para>
      But, if you'd like to get going RIGHT NOW, skip to the Quick
      Start section below.  For now, I'll summarize a few &twidge;
      features; a more comprehensive list is on the website.
    </para>

    <refsect2 id="twidge.features">
      <title>Feature List</title>
      <itemizedlist>
        <listitem><para>Convenient, easy to learn, and fast command-line
            interface (it's simple to do simple things, and
            advanced things are possible)</para>
        </listitem>

        <listitem><para>This extensive manual, and numerous examples
        on the website</para></listitem>

        <listitem><para>Compatible with any microblogging service that
            implements the Twitter API.  Tested with Twitter and
            Identica (identi.ca).  Should be compatible with any other
            system.
          </para></listitem>

        <listitem><para>Full support for reading the activity of your
            friends, replies to you, and your own
            activity.</para></listitem>

        <listitem><para>Optional capability to remember what you have
            seen already and suppress those updates in future
            runs.</para></listitem>

        <listitem><para>Optional integration with your email system --
            send and receive updates via email.</para></listitem>

        <listitem><para>Specifically designed to be friendly to use in
            shell scripts.</para></listitem>

        <listitem><para>Shell scripting makes it easy to do many
            things, such as scheduling future updates (with
            <command>at</command>), ignoring certain updates
            (with <command>grep</command>), etc.</para></listitem>
        
        <listitem><para>Easy use of multiple accounts by having
            multiple configuration profiles.   Mechanism lends itself
            to shell aliases and tools.</para></listitem>

        <listitem><para>Small, minimalist footprint</para>
        </listitem>

        <listitem><para>Output formats are easily parsed.  Input
            formats are easily generated.  Configuration file format is
            liberal and easy to generate.
          </para></listitem>

        <listitem><para>Robust error detection and recovery
        throughout.
          </para></listitem>
      </itemizedlist>
    </refsect2>

  </refsect1>

  <refsect1 id="twidge.quickstart">
    <title>Quick Start</title>
    <para>
      This section will describe how a first-time &twidge; user can
      get up and running quickly.  It assumes you already have
      &twidge; compiled or installed on your system.  If not,
      please follow the instructions in the
      <filename>INSTALL</filename>
      file in the
      source distribution.
    </para>
    <para>
      To get started, simply run <command>twidge setup</command> at your
      shell prompt.  &twidge; will lead you through the first-time
      configuration -- which is only two questions and completely
      self-explanatory!
    </para>
    <para>
      Now, let's start exploring.  <command>twidge lsrecent
      -su</command> will show you the 20 most recent updates from the
      people you follow.  After the first time, it will remember what
      you've seen and only show you new updates.  In place of
      <command>lsrecent</command>, you could substitue
      <command>lsreplies</command> to replies to you.  You can also
      run <command>twidge lsrecent --help</command>, or refer to this
      document, for more details on the command.  In short, -s tells
      the system to save what you've seen, and -u tells it to only
      show you unseen items.
    </para>
    <para>
      You can subscribe to updates from friends by running
      <command>twidge follow
      <replaceable>nick</replaceable></command>.  To subscribe to
      updates for &twidge; itself, you'd run <command>twidge follow
      unixtwidge</command>.  If you've had enough of updates from
      someone, just use the <command>twidge unfollow</command> command.
    </para>
    <para>
      Now, how about posting your own updates?  Just type
      <command>twidge update</command>.  Type your update, and press
      Enter when done.  Your update may scroll past the end of the
      screen; don't worry about it.  Just don't hit Enter until you're
      done.  You can also pass your update on the command line, taking
      care to quote it if it contains spaces or shell characters.
    </para>
    <para>
      That's the quick tour.  For many more examples, refer to the
      website.
    </para>
  </refsect1>

  <refsect1 id="twidge.options">
    <indexterm><primary>Options (command-line)</primary></indexterm>
    <title>Options</title>
    <para>
      &twidge; always is invoked with the name of a specific
      operation, such as <option>update</option> or
      <option>lsrecent</option>.  In &twidge;, these operations are
      called <emphasis>commands</emphasis>.  Each command has its
      own options, which are given after the command on the
      &twidge; command line.  A full summary of each command's
      options is given later in this manual.
    </para>
    
    <para>
      You may obtain a list of all commands with <command>twidge
        lscommands</command>.  Help is available for any individual
      command with <command>twidge <replaceable>command</replaceable>
        --help</command>.  Global help is available with
      <command>twidge --help</command>.
    </para>
    <refsect2 id="twidge.options.global">
      <title>Global Options</title>
      <para>
        These options may be specified <emphasis>before</emphasis> any
        command.
      </para>
      <variablelist>
        <varlistentry><term>-c <replaceable>FILE</replaceable></term>
                      <term>--config=<replaceable>FILE</replaceable></term>
          <listitem><para>
              By default, &twidge; uses
              <filename>~/.twidgerc</filename> for configuration.
              With this option, you can specify an alternate file.
              &twidge; will read configuration information
              from it.  In certain cases, &twidge; will also write to
              it, such as with the <command>twidge setup</command>
              command, or the -s option to one of the ls commands.
            </para>
          </listitem>
        </varlistentry>
        <varlistentry><term>-d</term><term>--debug</term>
          <listitem><para>
              Enables debugging output.  This verbose output helps you
              learn what &twidge; is doing every step of the way and
              diagnose any problems you may encounter.
            </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </refsect2>

  </refsect1>

  <refsect1 id="twidge.commands">
    <indexterm><primary>Commands</primary></indexterm>
    <title>Commands in Twidge</title>
    <para>
      &twidge; has many different commands.  You must specify a
      command when using &twidge;.
      This section will discuss each command in
      detail.  Note that all commands are case-sensitive and should be
      <emphasis>given in lowercase</emphasis>.
    </para>
    <para>
      All commands support the option <option>--help</option>.  Running
      <command>twidge <replaceable>command</replaceable>
      --help</command> will display information about the command and
      its options.  Since all commands support this, it won't be
      explicitly listed for each command below.
    </para>

  </refsect1>
  <refsect1 id="twidge.commands.updatedisplay">
    <title>Commands to Display Updates</title>
    <cmdsynopsis>
        <command>twidge ls<replaceable>*</replaceable></command>
        <arg choice="opt">-a</arg>
        <arg choice="opt">-l</arg>
        <arg choice="opt">-s</arg>
        <arg choice="opt">-u</arg>
    </cmdsynopsis>
    <para>
      Several commands can display updates from yourself or others.
      They all share a common syntax and common set of options.  The
      commands are <command>lsarchive</command>,
      <command>lsrecent</command>, and <command>lsreplies</command>.
      Here are the common options:
    </para>
    
    <variablelist>
      <varlistentry><term>-a</term>
        <term>--all</term>
        <listitem><para>
            Normally, microblogging sites return one "page" of results
            -- typically, 20 or 100 results, depending on the
            operation.  Specifying --all requests &twidge; to
            continually send requests to the microblogging site until
            it receives an entire set of information.  Normally this
            is a bad idea, but when used in combination with -u --
            especially if you have used -s before -- it can be a
            useful way to poll for all new updates.
          </para>
          <para>
            If not used carefully, this command can generate many
            requests to the server and can use a significant amount of
            bandwidth.  Microblogging sites have traffic limits, and
            will not take kindly to this.  Be careful when you use
            --all.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry><term>-l</term>
        <term>--long</term>
        <listitem><para>
            The default output format shows a nickname and a message,
            formatted nicely for display.  Using this option adds the
            internal microblogging site's ID for the specific message,
            and formats the output suitable for machine parsing.  The
            horizontal tab character \t separates the three columns,
            and is guaranteed to appear nowhere else.  It is also
            guaranteed that \n will appear nowhere within a line when
            using -l.
          </para></listitem>
      </varlistentry>
      
      <varlistentry><term>-s</term>
        <term>--saveid</term>
        <listitem><para>
            Saves the ID of the most recent fetched message for future
            use with -u.  Requires write access to your configuration
            file.
          </para></listitem>
      </varlistentry>

      <varlistentry><term>-u</term>
        <term>--unseen</term>
        <listitem><para>
            Causes the command to show only items since the last use
            of -s with this particular command.  If -s has never
            before been used with this command, has no effect.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>

    <refsect2 id="twidge.commands.lsarchive">
      <title>lsarchive</title>
      <para>
        Lists your own posts.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.lsrecent">
      <title>lsrecent</title>
      <para>
        Lists recent posts made by you or the people you follow.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.lsreplies">
      <title>lsreplies</title>
      <para>
        Lists recent replies made by anyone on the microblogging site
        to you.
      </para>
    </refsect2>
  </refsect1>

  <refsect1 id="twidge.commands.displayinfo">
    <title>Commands to Display Other Information</title>
    <para>
      These commands honor --all and --long like the other commands,
      but do not honor --saveid or --unseen, as these options make no
      sense.
    </para>

    <refsect2 id="twidge.commands.lsfollowers">
      <title>lsfollowers</title>
      <cmdsynopsis>
        <command>twidge lsfollowers
          <arg choice="opt"><replaceable>options</replaceable></arg>
          <arg choice="opt"><replaceable>username</replaceable></arg>
        </command>
      </cmdsynopsis>
      <para>
        Will slow a list of people following you.  If given an
        optional username, shows the people that follow that user.  If
        given --long, shows the IDs for each person.  You may need to
        use --all to get a complete list, but again this may generate
        significant traffic.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.lsfollowing">
      <title>lsfollowing</title>
      <cmdsynopsis>
        <command>twidge lsfollowing
          <arg choice="opt"><replaceable>options</replaceable></arg>
          <arg choice="opt"><replaceable>username</replaceable></arg>
        </command>
      </cmdsynopsis>
      <para>
        Shows a list of the people you follow.  Arguments and actions
        are the same as with lsfollowers.
      </para>
    </refsect2>
  </refsect1>

  <refsect1 id="twidge.commands.action">
    <title>Action Commands</title>
    <para>
      These commands perform an action on the server.
    </para>

    <refsect2 id="twidge.commands.follow">
      <title>follow</title>
      <cmdsynopsis>
        <command>twidge follow <arg
        choice="plain"><replaceable>username</replaceable></arg></command>
      </cmdsynopsis>
      <para>
        This command will cause &twidge; to request that the
        microblogging site add the given username to the list of
        people you follow.  It is considered an error to attempt to
        add someone you already follow.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.setop">
      <title>setup</title>
      <cmdsynopsis><command>twidge setup</command></cmdsynopsis>
      <para>
        Enters the interactive first-time setup tool.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.unfollow">
      <title>unfollow</title>
      <cmdsynopsis>
        <command>twidge unfollow <arg
        choice="plain"><replaceable>username</replaceable></arg></command>
      </cmdsynopsis>
      <para>
        This command will cause &twidge; to request that the
        microblogging site remove the given username from the list of
        people you follow.  It is considered an error to attempt to
        remove someone you do not follow.
      </para>
    </refsect2>

    <refsect2 id="twidge.commands.update">
      <title>update</title>
      <cmdsynopsis>
        <command>twidge update <arg
        choice="opt"><replaceable>status</replaceable></arg></command>
      </cmdsynopsis>
      <para>
        Causes &twidge; to post a new status to the server.  If a
        status is given on the command line, it must be presented as a
        single argument to &twidge; by the use of shell quoting if
        needed.  If no status is given on the command line, a single
        line will be read from stdin and used as the status.
      </para>
    </refsect2>
  </refsect1>

  <refsect1 id="twidge.commands.other">
    <title>Other Command</title>
    
    <refsect2 id="twidge.commands.lscommands">
      <indexterm><primary>Commands</><secondary>lscommands</></>
      <title>lscommands</title>
      <cmdsynopsis><command>twidge lscommands</command></cmdsynopsis>
      <para>
        This command will display a list of all available &twidge;
        commands along with a brief description of each.
      </para>
    </refsect2>
  </refsect1>

  <refsect1 id="hpodder.error">
    <indexterm><primary>Errors</></>
    <title>Automatic Error Handling</title>
    <para>
      For whatever reason, podcast feeds or individual episodes sometimes
      fail to download.  The reasons for this range from the podcast being
      taken down by its author to the network being disconnected from the
      local computer.
    </para>
    <para>
      People that track many podcasts over a long time will probably find it
      annoying to have &twidge; attempt to download invalid feeds or
      episodes over and over again.  For that reason, &twidge; 1.0.0
      introduced automatic error handling.
    </para>
    <para>
      Once a podcast feed or episode has failed at least 15 times, 
      it's been at least 21 days since the first download attempt (episodes)
      or last update (feeds), &twidge; will automatically mark the item to
      be skipped in future runs.  For podcast feeds, &twidge; disabled the
      podcast; this status will appear in <command>hpodder lscasts</>.
      For episodes, &twidge; sets the status to Error; this will appear
      in <command>hpodder lseps</>.  Both can be changed later, with
      <command>hpodder enable</> or <command>hpodder setstatus</>,
      respectively.
    </para>
    <para>
      The default minimums of 15 attempts and 21 days may be adjusted in
      the &twidge; configuration file, either globally or on a per-podcast
      basis.
    </para>
    <para>
      If you wish to disable checking entirely, you can put lines such as
      <literal>epfaildays = 123456789</literal> and
      <literal>podcastfaildays = 123456789</literal> in your <literal>DEFAULT</>
      section in <filename>~/.hpodder/hpodder.conf</>.  Of course, if you
      have podcasts that still fail after 338,237 years, you could be in
      trouble.
    </para>
  </refsect1>

  <refsect1 id="hpodder.config">
    <indexterm><primary>Configuration File</><secondary>hpodder</></>
    <title>hpodder Configuration File</title>
    <para>
      &twidge; has a configuration file in which you can set various
      options.  This file normally lives under
      <filename>~/.hpodder/hpodder.conf</filename>.
    </para>
    <para>
      The configuration file has multiple sections.  Each section has
      a name and is introduced with the name in brackets.  Each
      section has one or more options.
    </para>
    <para>
      The section named DEFAULT is special in that it provides
      defaults that will be used whenever an option can't be found
      under a different section.
    </para>
    <para>
      Let's start by looking at an example file, and then proceed to
      examine all the options that are available.
    </para>
    <programlisting><![CDATA[
[DEFAULT]

; Most podcasts are downloaded to here
downloaddir = /home/jgoerzen/podcasts

namingpatt = %(safecasttitle)s/%(safefilename)s

; Don't disable a podcast due to errors unless it's been at least 20
; days since the last (or first) attempt
podcastfaildays = 20

[general]

; The following line tells hpodder that
; you have already gone through the intro.
showintro = no

maxthreads = 2
progressinterval = 1

[31]
; Store this particular podcast somewhere else
downloaddir = /nfs/remote/podcasts

; And we don't care as much about disabling it
podcastfaildays = 5
]]></programlisting>
    <para>
      In this example, you saw some "general" options, such as
      <option>showintro</option>.  There are two other sections
      represented: <option>31</option> and <option>DEFAULT</option>.
    </para>
    <para>
      Whenever &twidge; looks for information about a particular
      podcast, it first checks to see if it can find that option in a
      section for that podcast.  If not, it checks the
      <option>DEFAULT</option> section.  If it still doesn't find an
      answer, it consults its built-in defaults.
    </para>
    <para>
      In this example, all podcasts share the same naming scheme.  All
      podcasts except podcast 31 are downloaded to the same place.
      That podcast goes elsewhere because its
      <option>downloaddir</option> overrides the default.
    </para>
    <refsect2 id="hpodder.config.general">
      <title>General Options</title>
      <para>These are specified in the <option>general</option>
        section.
      </para>
      <variablelist>
        <varlistentry><term>maxthreads</term>
          <listitem><para>The maximum number of simultaneous download
              threads that will be active at any given time.
              &twidge; can download multiple files at once, and this
              options says how many it can download simultaneously.
              It defaults to 2.
            </para></listitem>
        </varlistentry>
        <varlistentry><term>progressinterval</term>
          <listitem><para>How frequently to update the status bar on
          the screen, in seconds.  It defaults to 1, which will update
          the status every second.  Raise it if you are running
          &twidge; over a very low-bandwidth link and are concerned
          about flooding it with status updates.</para></listitem>
        </varlistentry>
        <varlistentry><term>showintro</term>
          <listitem><para>The first time you run
              <command>fetch</command>, &twidge; automatically writes a
              configuration file for you that sets this option to
              <option>no</option>.  This prevents you from having to
              do the new user intro more than once.
            </para></listitem>
        </varlistentry>
      </variablelist>
    </refsect2>              

    <refsect2 id="hpodder.config.podcast">
      <title>Per-Podcast Options</title>
      <para>
        These options may be specified in <option>DEFAULT</option> or
        in a per-podcast section.  If placed in
        <option>DEFAULT</option>, they will apply to all podcasts
        unless overridden.
      </para>
      <refsect3 id="hpodder.config.podcast.basic">
        <title>Basic Per-Podcast Options</title>
      <variablelist>
        <varlistentry><term>downloaddir</term>
          <listitem><para>The main directory into which all podcasts
              should be stored.  It will be created by &twidge; when
              necessary if it does not already exist.  The default is
            <filename>~/podcasts</filename></para></listitem>
        </varlistentry>
        <varlistentry><term>epfailattempts</term>
          <listitem><para>
            The minimum number of attempts to download this episode before
            the episode will be considered to be marked Error.  Default is
            15.
          </para></listitem>
        </varlistentry>
        <varlistentry><term>epfaildays</term>
          <listitem><para>
            The minimum number of days that must have elapsed between the
            first attempt to download the episode and the present time before
            the episode will be considered to be marked Error.  Default is
            21.
            </para>
            </listitem>
            </varlistentry>
        <varlistentry><term>namingpatt</term>
          <listitem><para>How to name downloaded files.  This pattern
          is relative to the <option>downloaddir</option>.  The
          default is
          <filename>%(safecasttitle)s/%(safefilename)s</filename>
            </para>
            <para>
              This option will be provided with several replaceable
              tokens.  Tokens have the form
              <option>%(<replaceable>tokname</replaceable>)s</option>.
              That is, the percent sign, the token name in
              perenthesis, and then an "s" character.  The tokens made
              available for this option are:
            </para>
            <variablelist>
              <varlistentry><term>castid</term>
                <listitem><para>The numeric ID for this
                podcast</para>
                </listitem></varlistentry>
              
              <varlistentry><term>epid</term>
                <listitem><para>The numeric ID for this
                episode
                  </para>
                </listitem>
              </varlistentry>

                <varlistentry><term>safecasttitle</term>
                  <listitem><para>The title of the podcast, as specified
                      in the feed.  Special characters, such as spaces or
                      exclamation marks, are converted to
                      underscores.</para></listitem>
                </varlistentry>

                <varlistentry><term>safeeptitle</term>
                  <listitem><para>The title of this episode, as
                      specified in the podcast's feed, with special
                      characters converted to underscores.
                    </para></listitem></varlistentry>

                <varlistentry><term>safefilename</term>
                  <listitem><para>The component from the URL for this
                      episode after the last slash in the URL, with special
                      characters converted to underscores.
                    </para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </listitem>
          </varlistentry>
          <varlistentry><term>podcastfailattempts</term>
            <listitem><para>
                The minimum number of attempts to download this podcast before
                the episode will be considered to be marked disabled.  Default is
                15.
              </para></listitem>
          </varlistentry>
          <varlistentry><term>podcastfaildays</term>
            <listitem><para>
                The minimum number of days that must have elapsed between the
                last successful download of the podcast's feed
                and the present time before
                the podcast will be considered to be marked disabled.  Default is
                21.
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
      </refsect3>
      <refsect3 id="hpodder.config.podcast.processing">
        <title>Per-Podcast Command Options</title>
        <para>
          These are external commands that will be run in certain
          situations.  For each of the commands, several environment
          variables are set.  These variables are not pre-sanitized
          and may contain whitespace or special characters.  
          <emphasis>Extreme
          caution must be exercized to properly quote these variables
          when using them in shell commands or scripts.</emphasis>
          The following
          environment variables are set:
        </para>
        <variablelist>
          <varlistentry><term>CASTID</term>
            <listitem><para>The numeric ID for this podcast</para>
            </listitem>
          </varlistentry>
          
          <varlistentry><term>CASTTITLE</term>
            <listitem><para>The title of the podcast,
            verbatim</para></listitem>
          </varlistentry>

          <varlistentry><term>EPFILENAME</term>
            <listitem><para>The on-disk filename where this episode
            has been stored</para></listitem></varlistentry>

          <varlistentry><term>EPID</term>
            <listitem><para>The numeric epidose ID for this
            episode</para>
            </listitem>
          </varlistentry>

          <varlistentry><term>EPTITLE</term>
            <listitem><para>The title of this episode, as specified in
            the podcast's feed.</para>
            </listitem>
          </varlistentry>

          <varlistentry><term>EPURL</term>
            <listitem><para>The URL of this episode.</para></listitem>
          </varlistentry>

          <varlistentry><term>FEEDURL</term>
            <listitem><para>The URL of the podcast's
            feed.</para></listitem>
          </varlistentry>


          <varlistentry><term>SAFECASTTITLE</term>
            <listitem><para>The title of the podcast, as specified in
            the feed.  Special characters, such as spaces or
            exclamation marks, are converted to
            underscores.</para></listitem>
          </varlistentry>

          <varlistentry><term>SAFEEPTITLE</term>
            <listitem><para>The title of this episode, as specified in
            the podcast's feed, with special characters converted to
            underscores.
              </para></listitem></varlistentry>
        </variablelist>
        <para>
          Here are the supported commands:
        </para>
        <variablelist>
          <varlistentry><term>gettypecommand</term>
            <listitem><para>This command is intended to analyze the
                content of the file and return the true MIME type of the
                file, based on the on-disk content.  If this command exits
                with an error, the MIME type given in the podcast feed will
                be used.  If you want to always use the MIME type in the
                podcast feed, you can set this to
                <literal>/bin/false</literal> or the empty string.
              </para>
              <para>The default value is: <literal>file -b -i "${EPFILENAME}"</literal>
              </para>
              <para>
                It is expected that this program will write its result
                to standard output.  The first token of the output is
                taken to be the MIME type.  The remainder will be
                discarded.  For instance, for the output
                <literal>text/x-pascal; charset=us-ascii</literal>,
                the type will be taken to be
                <literal>text/x-pascal</literal>.  If the program
                exits with a nonzero exit code, its output will not be used.
              </para>
            </listitem>
          </varlistentry>

          <varlistentry><term>postproccommand</term>
            <listitem><para>This command provides a user-configurable
                post-processing hook for downloaded podcasts.  It is only
                invoked on files whose type matches the
                <option>postproctypes</option> list.  This command is the
                very last step in the downloading process.
              </para>
              <para>
                The default value adds ID3 tags to MP3 files.  It is:
                <literal>id3v2 -T "${EPID}" -A "${CASTTITLE}" -t "${EPTITLE}" --WOAF
                  "${EPURL}" --WOAS "${FEEDURL}" "${EPFILENAME}"</literal>
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
      </refsect3>

      <refsect3 id="hpodder.config.podcast.types">
        <title>Per-Podcast Type Processing Lists</title>
        <para>
          These options govern what types of files are processed in
          different ways.  The types used here are MIME types.  They
          will be the actual type determined by
          <option>gettypecommand</option>, or if that command is
          unable to determine a useful type, the MIME type given by
          the podcast's RSS feed.  Items in these lists are to be
          separated by commas.
        </para>
        <variablelist>
          <varlistentry><term>postproctypes</term>
            <listitem>
              <para>
                This is the comma-separated list of MIME types on
                which <option>postproccommand</option> will operate.
                The special single token <literal>ALL</literal> means
                to operate on all types.  To disable post-processing
                entirely, you can set this to the empty string.
                The default is: <literal>audio/mpeg, audio/mp3,
                x-audio/mp3</literal>
              </para></listitem></varlistentry>

          <varlistentry><term>renametypes</term>
            <listitem><para>
                This option governs the automatic renaming of
                downloaded files.  Some servers do not present files
                with proper extensions to match their file type.  This
                can confuse various software and devices.  &twidge;
                can automatically fix up extensions on such files.
                Each entry in the list in a MIME type, a colon, and
                the desired filename suffix.  Note that no whitespace
                is allowed around the colon.
              </para>
              <para>
                The default is: <literal>audio/mpeg:.mp3,
                audio/mp3:.mp3, x-audio/mp3:.mp3</literal>
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
      </refsect3>

    </refsect2>
  </refsect1>
              
  <refsect1 id="hpodder.curl.config">
    <indexterm><primary>Configuration File</><secondary>Curl</></>
    <title>Curl Configuration File</title>
    <para>
      Internally, &twidge; uses the Curl application to perform
      downloads across the Internet.  Curl is a remarkably flexible
      application, and &twidge; takes advantage of that to provide
      you with quite a few options.
    </para>
    <para>
      You can customize Curl as much as you like by creating a Curl
      configuration file in <filename>~/.hpodder/curlrc</filename>.
      Please see <application>curl</application>(1) for more details
      on the content of that file.
    </para>
    <para>Some things you can do with this file include restricting
    the maximum download rate, suppressing or adjusting the progress
    meter, configuring proxies, etc.
    </para>
  </refsect1>

  <refsect1 id="hpodder.tips">
    <title>Tips & Hints</title>
    <para>
      Here are a few tips and hints to make &twidge; more pleasant
      for you.
    </para>
    <refsect2 id="hpodder.tips.proxy">
      <title>Going Through a Proxy</title>
      <indexterm><primary>Proxy</><secondary>Using with hpodder</></>
      <para>
        If your connections must go through a proxy, you have two
        options: set an environment varilable or configure the proxy
        in your <filename>~/.hpodder/curlrc</filename>.  If you use an
        environment variable, your settings will also impact other
        applications -- and that's probably what you want.  See the
        Environment section later for tips on doing that.
      </para>
    </refsect2>

    <refsect2 id="hpodder.tips.ratelimit">
      <title>Limiting Your Download Speed</title>
      <indexterm><primary>Download Rate</><secondary>Limiting</></>
      <para>
        Sometimes, you may not want &twidge; to use all of your
        available bandwidth.  Perhaps you don't want it to slow down
        other activities too much.  To do this, just create a
        <filename>~/.hpodder/curlrc</filename> file.  Put in it
        something like this:
      </para>
      <programlisting>limit-rate=20k</programlisting>
      <para>
        This will limit the download rate to 20 KB/sec.
      </para>
      <para>
        This rate limitation is imperfect and may not do well during
        <command>update</command>, but it should do exactly what you
        want during <command>download</command>.
      </para>
    </refsect2>
  </refsect1>

  <refsect1 id="hpodder.environment">
    <title>Environment</title>
    <indexterm><primary>Environment Variables</></>
    <para>
      &twidge; does not read any environment variables directly.
      However, it does pass on the environment to the
      programs it calls, such as Curl.  This can be useful for
      specifying proxies.  Please see
      <application>curl</application>(1) for more details.
      As specified in the Per-Podcast Command Options section, &twidge;
      will also set certain variables for post-processing of
      downloaded files.
    </para>
  </refsect1>

  <refsect1 id="hpodder.conforming">
    <title>Conforming To</title>
    <itemizedlist>
      <listitem><para>The <ulink
      url="http://www.w3.org/XML/">Extensible Markup Language
            (XML)</ulink> standard (W3C)</para></listitem>
      <listitem><para><ulink
      url="http://blogs.law.harvard.edu/tech/rss">RSS 2.0</ulink>
      (Harvard Law)</para></listitem>
      <listitem><para>HTTP 1.1, FTP, plus SSL/TLS and any other
      protocols supported by Curl</para></listitem>
      <listitem><para>ID3 v1 and v2</para></listitem>
      </itemizedlist>
  </refsect1>

  <refsect1 id="hpodder.copyright">
    <title>Copyright</title>
    <indexterm><primary>Copyright</></>
    <para>
      &twidge;, all code, documentation, files, and build scripts are
      Copyright &copy; 2006 John Goerzen.  All code, documentation,
      sripts, and files are under the following license unless
      otherwise noted:
    </para>
    <para>
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
    </para>
    
    <para>
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
    </para>
    
    <para>
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
    </para>
    <para>
      The GNU General Public License is available in the file COPYING
      in the source distribution.  Debian GNU/Linux users may find this in
      /usr/share/common-licenses/GPL-2.
    </para>
    <para>
      If the GPL is unacceptable for your uses, please e-mail me; alternative
      terms can be negotiated for your project.
    </para>
  </refsect1>
  
  <refsect1 id="hpodder.author">
    <title>Author</title>
    <para>
      &twidge;, its modules, documentation, executables, and all
      included files, except where noted, was written by
      John Goerzen <email>jgoerzen@complete.org</email> and
      copyright is held as stated in the COPYRIGHT section.
    </para>
  </refsect1>

  <refsect1 id="dfs.seealso">
    <title>See Also</title>
    <para>
      <application>curl</application>(1),
      <application>id3v2</application>(1)
    </para>
    <para>
      The &twidge; homepage at <ulink
      url="http://quux.org/devel/hpodder"></>,
      a general description of podcasting at
      <ulink url="http://en.wikipedia.org/wiki/Podcast"></>
    </para>
  </refsect1>
  
  </refentry>
